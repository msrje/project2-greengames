<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" >
<head>
 	<th:block th:insert="~{admin/AdminLayout :: head}"/>
    <script type="text/javascript">
		$(function(){
			$("#cate1").keyup(fnKeyup);
		});
		
		
		function fnKeyup(){
			var fcate=$(this);
			var in_text=$(this).val().trim();
			if(in_text.length < 2){
				fcate.next().text("");
				return;
			}
			console.log(in_text);
			console.log(in_text.length);
			
			$.ajax({
				url:`/admin/categorys/${in_text}`,
				success:function(result){
					if(result==true){
						fcate.next().text("등록가능").css("color","green");
					}else{
						fcate.next().text("존재하는 카테고리명").css("color","red");
					}
					
				}
			});
			
		}
	</script>
</head>
<body class="flex">
    <th:block th:insert="~{admin/AdminLayout :: header}"/>
    <main>
    	<div class="wrap">
    		<p>카테고리 등록페이지</p>
    		<form action="/admin/departments" method="post">
    			<ul class="flex">
    				<li>
    					<input type="text" id="cate1" readonly="readonly" name="name" placeholder="1차카데고리" value="그린게임즈">
    					<div class="msg"></div>
    				</li>	
    				<li>
		    			<input type="text" name="name" placeholder="2차카데고리" required="required">
		    			<div class="msg"></div>
    				</li>
    				<li>
		    			<input type="text" name="name" placeholder="3차카데고리" required="required" >
		    			<div class="msg"></div>
    				</li>
    				<li>
    					<button>등록</button>
    				</li>
    			</ul>
    		</form>
    		<a href="/admin/departments">카테고리 리스트 띄우기</a>
    	</div>
    </main>
</body>
</html>