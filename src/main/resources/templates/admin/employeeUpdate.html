<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" >
<head>
 	<th:block th:insert="~{admin/AdminLayout :: head}"/>
	<link rel="stylesheet" href="/css/default.css">
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
 	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="/js/daumPostcode.js"></script>
	<script type="text/javascript">
    function gimgChanged(el) {
    	
    	var fileData=$(el)[0].files[0];
    	
    	console.log(fileData);
    	
    	var formData = new FormData()
		formData.append('gimg', fileData);
    	
    	$.ajax({
    		url: "/admin/temp-upload",
    		type: "post",
    		contentType: false,
    		processData: false,
    		data:formData,
    		success:function(map){ /* 서버에 업로드이후 url을 리턴 -> 파라미터에 전달 */
    			console.log(map);
    		
    			$(el).siblings(".img").css("background-image", "url("+map.url+")");
    			$(el).siblings(".newName").val(map.newName);
    			$(el).siblings(".orgName").val(map.orgName);
    			$(el).siblings(".size").val(map.size);
    			//대표 이미지와 추가 이미지 구분
    			if($(el).prop("id") == "defimg")return;//대표이미지인 경우 여기서 함수종료
    			
    			//추가이미지인경우 아래문장실행
    			if(idx < 3)addTag();
    		}	
    	});
    }
	</script>
</head>
<body class="flex">
	<th:block th:insert="~{admin/AdminLayout :: header}"/>
	<main>
	<h1>메인컨텐츠</h1>
	<div class="wrap view-size-m">
		<section id="signup-form">
			<h1>회원가입 폼</h1>
			<div class="wrap">
				<form action="#" method="post">
					<ul>
						<li>
							<label for="id">아이디</label>
							<input class="box-style-common" type="text" readonly="readonly" name="id" id="id" placeholder="아이디" value="${detail.id}">
							<div class="msg"></div>
						</li>
						<li>
							<label for="name">이름</label>
							<input class="box-style-common" type="text" readonly="readonly" name="name" id="name" placeholder="이름" value="${detail.name}">
							<div class="msg"></div>
						</li>
						<li>
							<label for="profile">프로필</label>
							<div>
	    						<label class="img" for="defimg">+</label>
	    						<input id="defimg" class="gimg" type="file" name="gimg" onchange="gimgChanged(this)">
	    						<input type="hidden" class="newName" name="newName">
	    						<input type="hidden" class="orgName" name="orgName">
	    						<input type="hidden" class="size" name="size">
	    					</div>
							<div class="msg"></div>
						</li>
						<li>
							<label for="pass">비밀번호</label>
							<input class="box-style-common" type="password" name="pass" id="pass" placeholder="비밀번호">
							<div class="msg"></div>
						</li>
						<li>
							<label for="pass-confirm">비밀번호 확인</label>
							<input class="box-style-common" type="password" id="pass-confirm" placeholder="비밀번호 확인">
							<div class="msg"></div>
						</li>
						<li>
							<label for="phone">번호</label>
							<input class="box-style-common" type="text" name="phone" id="phone" placeholder="번호" value="${detail.phone}">
							<div class="msg"></div>
						</li>
						<!-- 주소입력 -->
						<li>
							<input type="text" id="postcode" name="postcode" placeholder="우편번호" value="${detail.postcode}">
							<input type="button" onclick="daumPostcode()" value="우편번호 찾기"><br>
							<input type="text" id="roadAddress" name="roadAddress" placeholder="도로명주소" value="${detail.roadAddress}">
							<input type="text" id="jibunAddress" name="jibunAddress" placeholder="지번주소" value="${detail.jibunAddress}">
							<span id="guide" style="color:#999;display:none"></span>
							<input type="text" id="detailAddress"  name="detailAddress" placeholder="상세주소" value="${detail.detailAddress}">
							<input type="text" id="extraAddress" name="extraAddress" placeholder="참고항목" value="${detail.extraAddress}">
						</li>
						<li><button>수정</button></li>
					</ul>
				</form>
			</div>
		</section>
		
	</div>
</main>
</body>

</html>